extends base

- load widget_tweaks
- load humanize


block header
  - with headerMessage=task.name
    include includes/header-task-relation


block content

  .container-fluid
    #tree-action-area


    #document-action-area
      .row
        .col-xs-12.col-md-10.col-md-offset-1
          div(id="doc_{{document.pk}}", data-doc_pk="{{document.pk}}", data-pmid="{{document.document_id}}", style="cursor: not-allowed;").document
            .paragraphs(style="cursor: not-allowed;")



      .row.m-t-1
        .col-sm-5.col-md-3.col-md-offset-1.hidden-xs-down
          div(role="group").btn-group-vertical
            a(href='{% url "instructions:relation" %}', style='background-color:#fff; color:#7F3CFF; border-color:#7F3CFF; border-width:3px').btn.btn-default
              | Relation Instructions  <i class="fa fa-external-link fa-lg"></i>

            a(href='{% url "instructions:relation-definition-disease" %}', style='background-color: #d1f3ff;').btn.btn-default
              | Disease Concept  <i class="fa fa-external-link fa-lg"></i>

            a(href='{% url "instructions:relation-definition-gene" %}', style='background-color:rgb(177, 255, 168);').btn.btn-default
              | Genes Concept  <i class="fa fa-external-link fa-lg"></i>

            a(href='{% url "instructions:relation-definition-drug" %}', style='background-color:rgb(255, 209, 220);').btn.btn-default
              | Drugs Concept  <i class="fa fa-external-link fa-lg"></i>


block post-footer

  <script id="tree-template" type="x-template/underscore">
  <div id="tree-navigation" class="col-xs-12"></div>
  <div id="tree-selection" class="col-xs-10 col-xs-offset-1"></div>
  <div id="tree-selection-results" class="col-xs-12"></div>
  <div id="tree-text" class="col-xs-10"></div>
  </script>

  <script id="tree-navigation-template" type="x-template/underscore">
  <div id="progress-bar" class="col-xs-10 col-xs-offset-1 col-md-7 col-md-offset-1 col-lg-8 col-lg-offset-1"></div>
  <div class="col-xs-10 col-xs-offset-1 col-md-3 col-md-offset-0 col-lg-2 col-lg-offset-0">
  <p class="text-xs-center">Score: <span id='score'>0</span></p>
  </div>
  </script>

  <script id="reextraction-result-answer-item-template" type="x-template/underscore">
  <div class="box" style="background-color: <%= color %>;"></div>

  <% if(self) { %>
  <p><strong><%= percentage %>% – <%= label %></strong></p>
  <% } else { %>
  <p><%= percentage %>% – <%= label %></p>
  <% } %>
  </script>

  <script id="reextraction-results-template" type="x-template/underscore">
  <div class="row">
  <div class="col-xs-12 col-md-10 col-md-offset-1">
  <div id="chart"></div>
  </div>

  <div id="reextraction-answers-list" class="col-xs-12 col-md-10 col-md-offset-1"></div>

  <div class="col-xs-10 col-xs-offset-1 col-sm-10 col-sm-offset-1 col-md-4 col-md-offset-4">
  <button class="btn btn-primary btn-block">Next</button>
  </div>
  </div>
  </script>

  <script id="reextraction-concept-template" type="x-template/underscore">
  <div class="flag">&#10005;</div>
  <div class="text col-xs-12"><p><%= text %></p></div>
  <div class="desc col-xs-12"><p>is not a <%= type %> concept?</p></div>
  </script>

  <script id="reextraction-template" type="x-template/underscore">
  <div id="tree-extraction" class="row text-xs-center">
  <div id="c1" class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-3"></div>
  <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-6" style="padding-bottom:10px; padding-top:10px;">
  <div id="selected-choice"></div>
  <div id="rechoices-list"></div>
  </div>
  <div id="c2" class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-3"></div>
  </div>
  <div id="tree-confirm" class="row"></div>
  </script>

  script.
    var RETreeApp = Backbone.Marionette.Application.extend({
      region: '#tree-action-area',

      onStart: function() {
        var main = this.getRegion();

        main.show( new Tree({
          'csrf_token': "{{csrf_token}}",
          'document_pk': "{{ document.pk }}",
          'document_pmid': "{{ document.document_id }}"
          })
        );
      }
    });
    var tree_app = new RETreeApp();
    tree_app.start();

